\documentclass[a4paper, 11pt, ngerman]{article}
\usepackage{tikz-network}
\usepackage[left=2.5cm, right = 2.5cm,top=3cm,bottom=2.5cm, head=14pt]{geometry}
\usepackage{babel}
\usepackage[T1]{fontenc}
\usepackage[utf8x]{inputenc}
\usepackage{algpseudocode}
\usepackage{amsmath}


\newcommand{\Aufgabe}{Aufgabe 3: Pancake Sort} 
\newcommand{\TeilnahmeId}{67571}             
\newcommand{\Name}{Finn Rudolph}   

\usepackage{scrlayer-scrpage, lastpage}
\setkomafont{pageheadfoot}{\textrm}
\rohead{Teilnahme-ID: \TeilnahmeId}
\lohead{\Name}
\cfoot*{\thepage{}}

\usepackage{listings}
\usepackage{color}
\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}
\definecolor{myblue}{rgb}{0.3, 0.0, 0.9}
\lstset{
language=C++,
  keywordstyle=\color{myblue},commentstyle=\color{mygreen},
  stringstyle=\color{mymauve},rulecolor=\color{black},
  basicstyle=\footnotesize\ttfamily,numberstyle=\tiny\color{mygray},
  captionpos=b, % sets the caption-position to bottom
  keepspaces=true, % keeps spaces in text
  numbers=left, numbersep=5pt, showspaces=false,showstringspaces=true,
  showtabs=false, stepnumber=2, tabsize=2, title=\lstname
}

\title{\Huge Aufgabe 3: Pancake Sort}
\author{\Large Finn Rudolph \\ \\ \Large Teilnahme-ID: 67571}
\date{\Large 23. Dezember 2022}

\begin{document}

\begin{titlepage}
    \maketitle
    \thispagestyle{empty}
\end{titlepage}

\tableofcontents
\thispagestyle{empty}
\newpage

\section{Lösungsidee}

Pancake Sort ist tatsächlich ein bekannter Sortieralgorithmus, der zwar meist nicht zum Sortieren verwendet wird, aber anderweitige Anwendungen hat. Im unveränderten Pancake Sort wird der oberste Pfannkuchen allerdings nicht aufgegessen, sondern allein ein Präfix der zu sortierenden Folge umgekehrt, weshalb Pancake Sort auch als \emph{Sorting by Prefix Reversals} bezeichnet wird.

Im Folgenden wird ein Stapel an Pfannkuchen als Folge
$$
    p = p_1, p_2, p_3, \dots, p_n
$$
definiert, wobei $1 \le p_i \le n$ und $p_i \ne p_j$, für $1 \le i, j \le n$ und $i \ne j$. $p_1$ ist der oberste Pfannkuchen, $p_n$ der unterste. Da jede Zahl von 1 bis $n$ in dieser Folge genau einmal vorkommt, wird $p$ auch als Permutation der Länge $n$ bezeichnet. Um eine Wende-und-Ess-Operation kompakt auszudrücken, wird der Wende-und-Ess-Operator $\gamma_i$ eingeführt.
\newline \newline
\textbf{Definition 1.} $\gamma_i p$ bezeichnet die Permutation der ersten $n - 1$ natürlichen Zahlen, die man erhält, wenn die ersten $i$ Elemente von $p$ umgekehrt werden und anschließend das erste entfernt wird. Um tatsächlich eine Permutation der Länge $n - 1$ zu erhalten, werden durch $\gamma_i$ außerdem alle Elemente von $p$, die größer als $p_i$ sind, um 1 verkleinert. Das erhält die relative Ordung der Elemente, sodass die optimale Folge an Wende-und-Ess-Operationen unverändert bleibt.
$$
    \gamma_i p = p_{i-1}', p_{i-2}', \dots, p_2', p_1', p_{i+1}', p_{i+2}', \dots, p_n'
$$
$$
    p_j' = \begin{cases}
        p_j     & \text{wenn } p_j < p_i \\
        p_j - 1 & \text{wenn } p_j > p_i
    \end{cases}
    \quad 1 \le j \le n, j \ne i
$$
\newline \newline
Zum Beispiel, wenn $p = 4, 1, 2, 3$, dann ist
$$
    \gamma_3 p = \gamma_3 (4, 1, 2, 3) = 1, 3, 2
$$
Zuerst wurde das Präfix $4, 1, 2$ umgekehrt, dann die 2 am Anfang entfernt und schließlich 3 und 4 um 1 verringert.

\subsection{Der Pancake-Graph}

Im Kontext des ursprünglichen Pancake-Sort wird der Graph, in dem jede Permutation einer bestimmten Länge einem Knoten zugeordnet ist, als Pancake-Graph bezeichnet. Zwischen den Knoten zweier Permutationen verläuft genau dann eine ungerichtete Kante, wenn sie durch das Umkehren eines Präfixes ineinander umgewandelt werden können. Analog dazu kann man einen Pancake-Graphen $G_n$ für das vorliegende Problem definieren: Jeder Permutation der Länge $n$ oder kleiner ist ein Knoten, und zwischen zwei Permutationen $p$ und $q$ wird eine von $p$ nach $q$ gerichtete Kante eingefügt, wenn $\gamma_i p = q$, für irgendein $1 \le i \le |p|$. $G_n$ ist also ein gerichteter, azyklischer Graph (DAG) mit $n$ ``Ebenen'', für jede Permutationslänge eine. Kanten verlaufen nur zur direkt folgenden Ebene, da $\gamma_i$ die Länge um genau 1 reduziert. In Abbildung 1 ist $G_4$ dargestellt, aufgrund seiner Größe wurde er auf 2 Seiten aufgeteilt und Knoten der kleinern Permutationen dupliziert. Die Knoten sind jeweils in lexikographischer Ordung von oben nach unten angeordnet.

Betrachtet man die beiden Teile des Graphen gleichzeitig, fällt auf, dass der zweite Teil genau wie der erste Teil aussieht, nur vertikal gespiegelt. Auch die kleineren Pancake-Graphen $G_3, G_2$ und $G_1$, die in $G_4$ enthalten sind, scheinen symmetrisch um ihre Mitte zu sein. Genauer sind die Kanten symmetrisch um die Mitte, d. h. durch Spiegelung einer Kante an der Mitte der Permutationsliste erhält man ebenfalls eine Kante des Graphen.

\newpage
\begin{tikzpicture}[node distance = {19mm}, main/.style = {draw, circle}]
    \node[main](1234) at (0, 0) {1234};
    \node[main](1243) [below of = 1234] {1243};
    \node[main](1324) [below of = 1243] {1324};
    \node[main](1342) [below of = 1324] {1342};
    \node[main](1423) [below of = 1342] {1423};
    \node[main](1432) [below of = 1423] {1432};

    \node[main](2134) [below of = 1432] {2134};
    \node[main](2143) [below of = 2134] {2143};
    \node[main](2314) [below of = 2143] {2314};
    \node[main](2341) [below of = 2314] {2341};
    \node[main](2413) [below of = 2341] {2413};
    \node[main](2431) [below of = 2413] {2431};

    \node[main](123) at (7, -5.8) {123};
    \node[main](132) [below of = 123] {132};
    \node[main](213) [below of = 132] {213};
    \node[main](231) [below of = 213] {231};
    \node[main](312) [below of = 231] {312};
    \node[main](321) [below of = 312] {321};

    \node[main](12) at (11, -9.6) {12};
    \node[main](21) [below of = 12] {21};

    \node[main](1) at (13.5, -10.5) {1};

    \draw[->](1234) -- (123);
    \draw[->](1234) -- (213);
    \draw[->](1234) -- (321);

    \draw[->](1243) -- (132);
    \draw[->](1243) -- (213);
    \draw[->](1243) -- (321);

    \draw[->](1324) -- (213);
    \draw[->](1324) -- (123);
    \draw[->](1324) -- (231);

    \draw[->](1342) -- (231);
    \draw[->](1342) -- (132);
    \draw[->](1342) -- (312);
    \draw[->](1342) -- (321);

    \draw[->](1423) -- (312);
    \draw[->](1423) -- (123);
    \draw[->](1423) -- (231);

    \draw[->](1432) -- (321);
    \draw[->](1432) -- (132);
    \draw[->](1432) -- (312);
    \draw[->](1432) -- (231);

    \draw[->](2134) -- (123);
    \draw[->](2134) -- (312);

    \draw[->](2143) -- (132);
    \draw[->](2143) -- (123);
    \draw[->](2143) -- (312);

    \draw[->](2314) -- (213);
    \draw[->](2314) -- (132);

    \draw[->](2341) -- (231);
    \draw[->](2341) -- (321);

    \draw[->](2413) -- (312);
    \draw[->](2413) -- (213);
    \draw[->](2413) -- (132);

    \draw[->](2431) -- (321);
    \draw[->](2431) -- (231);

    \draw[->](123) -- (12);
    \draw[->](123) -- (21);
    \draw[->](132) -- (21);
    \draw[->](132) -- (12);
    \draw[->](213) -- (12);
    \draw[->](231) -- (21);
    \draw[->](312) -- (12);
    \draw[->](312) -- (21);
    \draw[->](321) -- (12);
    \draw[->](321) -- (21);

    \draw[->](12) -- (1);
    \draw[->](21) -- (1);
\end{tikzpicture}

\newpage
\begin{tikzpicture}[node distance = {19mm}, main/.style = {draw, circle}]
    \node[main](3124) at (0, 0) {3124};
    \node[main](3142) [below of = 3124] {3142};
    \node[main](3214) [below of = 3142] {3214};
    \node[main](3241) [below of = 3214] {3241};
    \node[main](3412) [below of = 3241] {3412};
    \node[main](3421) [below of = 3412] {3421};

    \node[main](4123) [below of = 3421] {4123};
    \node[main](4132) [below of = 4123] {4132};
    \node[main](4213) [below of = 4132] {4213};
    \node[main](4231) [below of = 4213] {4231};
    \node[main](4312) [below of = 4231] {4312};
    \node[main](4321) [below of = 4312] {4321};

    \node[main](123) at (7, -5.8) {123};
    \node[main](132) [below of = 123] {132};
    \node[main](213) [below of = 132] {213};
    \node[main](231) [below of = 213] {231};
    \node[main](312) [below of = 231] {312};
    \node[main](321) [below of = 312] {321};

    \node[main](12) at (11, -9.6) {12};
    \node[main](21) [below of = 12] {21};

    \node[main](1) at (13.5, -10.5) {1};

    \draw[->](3124) -- (123);
    \draw[->](3124) -- (213);

    \draw[->](3142) -- (132);
    \draw[->](3142) -- (231);
    \draw[->](3142) -- (312);

    \draw[->](3214) -- (213);
    \draw[->](3214) -- (123);

    \draw[->](3241) -- (231);
    \draw[->](3241) -- (312);

    \draw[->](3412) -- (312);
    \draw[->](3412) -- (321);
    \draw[->](3412) -- (132);

    \draw[->](3421) -- (321);
    \draw[->](3421) -- (132);

    \draw[->](4123) -- (123);
    \draw[->](4123) -- (312);
    \draw[->](4123) -- (132);
    \draw[->](4123) -- (213);

    \draw[->](4132) -- (132);
    \draw[->](4132) -- (321);
    \draw[->](4132) -- (213);

    \draw[->](4213) -- (213);
    \draw[->](4213) -- (312);
    \draw[->](4213) -- (132);
    \draw[->](4213) -- (123);

    \draw[->](4231) -- (231);
    \draw[->](4231) -- (321);
    \draw[->](4231) -- (213);

    \draw[->](4312) -- (312);
    \draw[->](4312) -- (231);
    \draw[->](4312) -- (123);

    \draw[->](4321) -- (321);
    \draw[->](4321) -- (231);
    \draw[->](4321) -- (123);

    \draw[->](123) -- (12);
    \draw[->](123) -- (21);
    \draw[->](132) -- (21);
    \draw[->](132) -- (12);
    \draw[->](213) -- (12);
    \draw[->](231) -- (21);
    \draw[->](312) -- (12);
    \draw[->](312) -- (21);
    \draw[->](321) -- (12);
    \draw[->](321) -- (21);

    \draw[->](12) -- (1);
    \draw[->](21) -- (1);
\end{tikzpicture}
\newline \newline
\textbf{Abbildung 1:} Der Pancake-Graph $G_4$. Von Knoten $u$ verläuft genau dann eine gerichtete Kante nach Knoten $v$, wenn die zu $u$ zugehörige Permutation durch ein $\gamma_i$ in die zu $v$ zugehörige Permutation umgewandelt werden kann.
\newpage
Wenn man $G_4$ an einem Stück ohne Duplikation von Knoten zeichnen würde, wäre tatsächlich der gesamte Graph symmetrisch um die Mitte der lexikographisch geordneten Liste aller Permutationen der Länge 4. Das lässt vermuten, dass diese Symmetrie auch bei $G_5, G_6$ und allgemein $G_n$, für jede natürliche Zahl $n$, auftritt.
Bei genauerer Betrachtung des Effekts von $\gamma_i$ auf zwei zur Mitte symmetrisch liegende Permutationen fällt noch eine stärkere Eigenschaft auf. Wir betrachten als Beispiel $p = 1,3,4,2$ und $p^* = 4, 2, 1, 3$, zwei symmetrisch liegende Permutationen:
\begin{align*}
    \gamma_1 p = 2, 3, 1 \quad \gamma_1 p^* = 2, 1, 3 \\
    \gamma_2 p = 1, 3, 2 \quad \gamma_2 p^* = 3, 1, 2 \\
    \gamma_3 p = 3, 1, 2 \quad \gamma_3 p^* = 1, 3, 2 \\
    \gamma_4 p = 3, 2, 1 \quad \gamma_4 p^* = 1, 2, 3
\end{align*}
Die Ergebnisse der jeweiligen Anwendung von $\gamma_i$ liegen symmetrisch um die Mitte der Liste aller Permutationen von Länge 3. Mithilfe des Programms \emph{test\_sym.cpp} konnte diese Eigenschaft für alle symmetrisch gelegenen Paare an Permutationen bis Größe 10 bestätigt werden. Es scheint also, dass die Symmetrie des Pancake-Graphen allgemein gültig ist. Sie würde es einem Algorithmus zum Finden der kürzesten Folge an $\gamma_i$-Operationen erlauben, nur die Hälfte aller Permutationen in Betracht ziehen zu müssen, da auf die Ergebnisse von $\gamma_i$-Operationen mit der anderen Hälfte durch Symmetrie geschlossen werden kann.

Um diese Vermutung zu beweisen, muss in einem Einschub das fakultätsbasierte Zahlensystem eingeführt werden. Mithilfe dessen und einigen weiteren Lemmas kann anschließend die endtdeckte Symmetrie formal festgehalten werden.
\subsubsection*{Das fakultätsbasierte Zahlensystem}
Im fakultätsbasierten Zahlensystem wird im Gegenstz zum Dezimal- oder Binärsystem eine unterschiedliche Basis für jede Ziffer verwendet. Die $k$-te Ziffer, von rechts gelesen, verwendet $k!$ als Basis, beginnend mit 0, und kann die Werte 0 bis $k$ annehmen. Der Wert einer fakultätsbasiert geschriebenen Zahl ist die Summe der einzelnen Ziffern, multipliziert mit ihrer jeweiligen Basis. Beispielsweise ist
\begin{align*}
    17_{10} & = 2210_!   = 2 \cdot 3! + 2 \cdot 2! + 1 \cdot 1! + 0 \cdot 0!             \\
    24_{10} & = 10000_! = 1 \cdot 4! + 0 \cdot 3! + 0 \cdot 2! + 0 \cdot 1! + 0 \cdot 0! \\
    23_{10} & = 3120_!  = 3 \cdot 3! + 2 \cdot 2! + 1 \cdot 1! + 0 \cdot 0!
\end{align*}
wobei das tiefgestellte ! auf das fakultätsbasierte Zahlensystem hinweist. Eine Fakultät $n!$, geschrieben im fakultätsbasierten Zahlensystem, ist immer von der Form $1000\dots$ ($n$ Nullen). Die Ziffern von $n! - 1$ sind genau $n-1, n-2, n-3, \dots, 0$.
Da sich mit einer fakultätsbasierten Zahl mit $n$ Ziffern genau $n!$ Zahlen darstellen lassen, können diese Zahlen auf natürlichem Weg zum Nummerieren von Permutationen der Länge $n$ verwendet werden. Die Folgenden zwei Arten der Nummerierung sind entscheidend den Beweis der Symmetrie des Pancake-Graphen.
\newline \newline
\textbf{Definition 2.} Mit $\mu(p)$ wird der Index der Permutation $p$ in einer \emph{lexikographisch aufsteigend} sortierten Folge aller Permutationen der Länge $|p|$ bezeichnet. $\mu(p)$ ist auch als Lehmer-Code von $p$ bekannt. Mit $\mu(p)_i$ wird die $i$-te Ziffer (beginnend von links) von $\mu(p)$, geschrieben im fakultätsbasierten Zahlensystem, bezeichnet.
\newline \newline
\textbf{Definition 3.} Mit $\nu(p)$ wird der Index der Permutation $p$ in einer \emph{kolexikographisch absteigend} sortierten Folge aller Permutationen der Länge $|p|$ bezeichnet. Bei Sortierung nach kolexikographischer Ordung werden die Permutationen von rechts anstatt von links beginnend verglichen. Mit $\nu(p)_i$ wird die $i$-te Ziffer (beginnend von links) von $\nu(p)$, geschrieben im fakultätsbasierten Zahlensystem, bezeichnet.
\newline \newline
Für $\mu(p)$ und $\nu(p)$ gelten folgende Eigenschaften: $\mu(p)_i$ ist genau die Anzahl an kleineren Elementen rechts von $p_i$, und $\nu(p)_{|p| - i - 1}$ genau die Anzahl an größeren Elementen links von $p_i$ (Quelle). Als nächstes wird das zu $p$ symmetrisch gelegene Permutation definiert.
\newline \newline
\textbf{Definition 4.} Sei $p$ eine Permutation der Länge $n$. $p^*$ bezeichnet die Permutation, sodass $\mu(p) = n! - \mu(p^*) - 1$. $p$ und $p^*$ werden auch als symmetrisch gelegene Permutationen bezeichnet.
\newline \newline
Nun soll gezeigt werden, dass die Summe von $\mu(\gamma_i p)$ und $\mu(\gamma_i p^*)$ genau $(n - 1)! - 1$ ist. Denn daraus folgt direkt, dass $\gamma_i p$ und $\gamma_i p^*$ wieder ein symmetrisches Paar von Permutationen ist. Zunächst wird dafür folgendes Lemma benötigt.
\newline \newline
\textbf{Lemma 1.} Sei $p$ eine Permutation der Länge $n$ und $p_i$ irgendein Element von $p$ $(0 \le i \le n - 1)$. Für jedes $0 \le j \le n-1, j \ne i$ ist entweder ($p_i < p_j$ und $p^*_i > p^*_j$) oder ($p_i > p_j$ und $p^*_i < p^*_j$).
\newline \newline
\emph{Beweis.} In anderen Worten sagt Lemma 1, dass die kleineren, rechts gelegenen (bzw. größeren, links gelegenen) Elemente von $p_i$ und $p^*_i$ alle an unterschiedlichen Positionen liegen. Daneben tritt an jeder Position $j$ entweder in $p$ oder $p^*$ eine Inversion mit $p_i$ bzw. $p^*_i$ auf. Zunächst soll eine etwas schwächere Eigenschaft gezeigt werden, mithilfe der ein Beweis schließlich möglich ist.

Aufgrund der Definition von $p^*$ gilt $\mu(p) + \mu(p^*) = n! - 1$. Die Ziffern von $n! - 1$ in fakultätsbasierter Schreibweise sind aber genau in der Form $n-1, n-2, n-3, \dots, 0$, d. h. jede Ziffer bis zu $n$-ten nimmt ihren maximalen Wert an. Außerdem geben die Ziffern $\mu(p)_i$ und $\mu(p^*)_{i}$ die Anzahl an kleineren, rechts gelegenen Elementen von $p_i$ und $p^*_i$ an. Daher muss die Anzahl an kleineren, rechts gelgenen Elementen von $p_i$ plus der Anzahl an kleineren, rechts gelegenen Elementen von $p^*_i$ genau $n-i-1$ sein. Denn da die $i$-te Ziffer von $\mu(p) + \mu(p^*)$ genau $n - i - 1$ ist, muss $\mu(p)_i + \mu(p^*)_{i} = n-i-1$ gelten. Wäre das nicht der Fall, ist es leicht zu überprüfen, dass die Summe von $\mu(p)$ und $\mu(p^*)$ nicht $n! - 1$ sein kann. Da $\nu(p) + \nu(p^*) = n! - 1$, kann mit ähnlicher Begründung gezeigt werden, dass die Anzahl an größeren, links gelegenen Elementen von $p_i$ plus der Anzahl an größeren, links gelegenen Elementen von $p^*_i$ genau $i$ ist. Wichtig ist, dass die Anzahl an links gelegenen, größeren und rechts gelegenen, kleineren Elementen von $p_i$ und $p^*_i$ zusammengezählt allein anbhängig von $i$ ist, aber unabhängig davon, welche Permutation $p$ ist.

Der eigentliche Beweis geschieht durch unendlichen Abstieg. Man nehme an, dass für irgendein $j_0 > i$ sowohl $p_{j_0} < p_i$, als auch $p^*_{j_0} < p^*_i$ gilt. Der Fall $j_0 < i$ funktioniert ähnlich. Da $\nu(p)_{j_0} + \nu(p^*)_{n - j_0 - 1} = j_0$, muss für irgendein ein $j_1 < j_0$ gelten, dass $p_{j_1} < p_{j_0}$ und $p^*_{j_1} < p^*_{j_0}$. Andernfalls wäre es nicht möglich, auf die insgesamt $j_0$ links gelegenen, größeren Elemente von $p_{j_0}$ und $p^*_{j_0}$ zu kommen. Nun gibt es zwei Fälle:
\begin{enumerate}
    \item $j_1 < i$: Rechts von $j_1$ liegen $i$ und $j_0$, das heißt, es muss erneut zwei Indizes $j_2, j_3 > j_1$ geben, sodass $p_{j_2} < p_j1$ und $p^*_{j_2} < p^*_{j_1}$, $p_{j_3} < p_{j_1}$ und $p^*_{j_3} < p^*_{j_1}$. Andernfalls wäre es wieder nicht möglich, auf die nötigen $\mu(p)_{j_1} + \mu(p^*)_{n - j_1 - 1}$ nötigen, kleineren rechts gelegenen Elemente zu kommen.
    \item $i < j_1 < j_0$: Da $p_{j_1} < p_{j_0}$ und $p^*_{j_1} < p^*_{j_0}$, muss es rechts von $j_1$ einen Index $j_2 < j_1$ geben, sodass $p_{j_2} < p_{j_1}$ und $p^*_{j_2} < p^*_{j_1}$. Auch rechts von $j_1$ muss es einen Index $j_3 > j_1$ geben, sodass $p_{j_3} < p_{j_1}$ und $p^*_{j_3} < p^*_{j_1}$. Erneut wäre andernfalls das Erreichen der nötigen $\mu(p)_{j_1} + \mu(p^*)_{n - j_1 - 1}$ rechts gelegenen, kleineren und der $\nu(p)_{j_1} + \nu(p^*)_{n - j_1 - 1}$ links gelegenen, größeren Elemente unmöglich.
\end{enumerate}
Man sieht, dass durch die Forderung nach einer allein vom Index anbhängigen Zahl rechts gelegener, kleinerer bzw. links gelegener, größerer Elemente immer kleinere Zahlen in $p$ und $p^*$ gezwungen werden. Um diese herum sind aber nur größere Elemente, wodurch wieder kleinere Zahlen nötig werden. Das ist ein Widerspruch, da natürliche Zahlen, wie sie in einer Permutation vorkommen, nicht unendlich oft verringert werden können. Daneben wären die $n$ verfügbaren Elemente irgendwann ausgeschöpft. Da zeigt, dass die Annahme $p_{j_0} < p_i$ und $p^*_{j_0} < p^*_i$ falsch war. Auch wenn in dem Beweis $j_0 > i$ angenommen wurde, lässt sich der Fall $j_0 < i$ mit gleicher Begründung zeigen.
\newline \newline
Aus Lemma 1 folgt eine sehr nützliche Eigenschaft. Wir definieren
$$
    \eta(p, i, j, k) = \sum_{h = j}^k \begin{cases}
        1 & \text{wenn } p_i > p_h   \\
        0 & \text{wenn } p_i \le p_h
    \end{cases}
$$
$\eta(p, i, j, k)$ gibt also die Anzahl an Elementen von $p$ im Intervall $[j, k]$ an, die kleiner als $p_i$ sind. Aufgrund von Lemma 1 gilt
$$
    \eta(p, i, j, k) + \eta(p^*, i, j, k) = k - j + 1
$$
Mithilfe dieser Eigenschaft wird nun gezeigt, dass das Umkehren von Präfixen zweier symmetrisch gelegener Permutationen erneut zu zwei symmetrisch gelegene Permutationen führt. Das ist bereits sehr nahe am gewünschten Ergebnis, es muss lediglich noch das erste Element aus der Permutation entfernt werden.
\newline \newline
\textbf{Lemma 2.} Seien $x$ und $y$ die Permutationen, die aus $p$ und $p^*$ durch Umkehrung des Präfixes bis einschließlich Index $i$ hervorgehen. Wenn $\mu(p) + \mu(p^*) = n! - 1$, dann gilt auch $\mu(x) + \mu(y) = n! - 1$.
\newline \newline
\emph{Beweis.} $\mu(p)$ und $\mu(p^*)$ geben in fakultätsbasierter Schreibweise die Anzahl an rechts gelegenen, kleineren Elementen an. Man nehme an, das Präfix bis einschließlich Index $i$ wird umgekehrt, für irgendein $0 \le i \le n-1$. Da an den Elementen $p_j, p^*_j$ für $j > i$ nichts geändert wird, ändert sich auch nicht ihre Zahl rechts gelegener, kleinerer Elemente, d. h. sie können im Folgenden außer Acht gelassen werden. Für $j < i$ werden alle links gelegenen, kleineren Elemente durch die Umkehrung auf die rechte Seite gebracht, die kleineren Elemente rechts von $i$ bleiben. Der Index, zu dem das $j$-te Element durch die Umkehrung bewegt wird, ist $i - j$. Wenn $x$ und $y$ die Permutationen sind, die aus $p$ und $p^*$ nach Umkehrung des Präfixes bis $i$ hervorgehen, ist die Anzahl rechts gelegener, kleinerer Elemente von $x_{i - j}$ und $y_{i - j}$ zusammen folglich
\begin{align*}
    \mu(x)_{i - j} + \mu(y)_{i - j}
     & = \eta(p, j, 0, j - 1) + \eta(p, j, i + 1, n - 1) + \eta(p^*, j, 0, j - 1) + \eta(p^*, j, i + 1, n - 1) \\
     & = \eta(p, j, 0, j - 1) + \eta(p^*, j, 0, j - 1) + \eta(p, j, i + 1, n - 1) + \eta(p^*, j, i + 1, n - 1) \\
     & = j - 1 + 1 + n - 1 - (i + 1) + 1                                                                       \\
     & = j + n - i - 1                                                                                         \\
     & = n - (i - j) - 1
\end{align*}
Daraus folgt, dass für jedes $0 \le i \le n - 1$ gilt, dass $\mu(x)_i + \mu(y)_i = n - i-1$, oder $\mu(x) + \mu(y) = n! - 1$. Wenn also das gleiche Präfix zwei symmetrisch gelegener Permutationen umgekehrt wird, gehen daraus erneut zwei symmetrisch gelegene Permutationen hervor.
\newline \newline
Nun kann die Symmetrie des Pancake-Graphen, bzw. des $\gamma_i$-Operators als Satz festgehalten werden.
\newline \newline
\textbf{Satz 1.} Wenn $p$ eine Permutation der Länge $n$ und $q$ eine Permutation der Länge $n - 1$ ist, gilt
$$
    \gamma_i p = q \Longleftrightarrow \gamma_i p^* = q^* \quad 0 \le i \le n - 1
$$
\newline \newline
\emph{Beweis:} Wir nennen die Permutation, die man durch Umkehren des Präfixes bis $i$ von $p$ erhält $x$. Aufgrund von Lemma 2 ist $x^*$ genau die Permutation, die man durch Umkehren des Präfixes bis $i$ von $p^*$ erhält. Wir betrachten nun $\mu(x)$ und $\mu(x^*)$ in fakultätsbasierter Schreibweise. Entfernt man das erste Element von $x$ bzw. $x^*$, verändern sich die Ziffern $\mu(x)_i$ bzw. $\mu(x^*)_i$ für $i > 0$ nicht, da sie nur die Anzahl rechts gelegener, kleinerer Elemente zählen, zu denen $x_0$ bzw. $x^*_0$ für $i > 0$ nicht gehören kann. Daher gilt $\mu(x)_i + \mu(x^*)_i = n - i - 1$ auch nach Entfernen des ersten Elements von $x$ und $x^*$. Aber die daraus entstehende Folge ist genau $\gamma_i p$ bzw. $\gamma_i p^*$, folglich sind $\gamma_i p$ und $\gamma_i p^*$ symmetrisch gelegene Permutationen, für jedes $0 \le i \le n - 1$.

\subsection{Beweis der NP-Schwere}

\subsection{Finden der kürzesten Folge an $\gamma_i$-Operationen}

\subsection{Berechnung der PWUE-Zahl}

\section{Implementierung}

\section{Quellcode}

\end{document}